// schema.prisma

// Define o modelo de dados para os utilizadores

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Utilizador {
    id       Int        @id @default(autoincrement())
    nome     String
    email    String     @unique
    isAdmin  Boolean    @default(false)
    password String
    numtel   String
    compras  Compra[]
}

model Evento {
    id                Int              @id @default(autoincrement())
    nome              String
    data              DateTime
    localizacao       String
    foto              String
    descricao         String
    preco             Float
    quantidade        Int
    categoria         CategoriaEvento  @relation(fields: [categoriaEventoId], references: [id])
    categoriaEventoId Int
    compras           Compra[]
}

model CategoriaEvento {
    id      Int       @id @default(autoincrement())
    nome    String
    eventos Evento[]
}

model Compra {
    id           Int        @id @default(autoincrement())
    utilizadorId Int
    utilizador   Utilizador @relation(fields: [utilizadorId], references: [id])
    eventoId     Int
    evento       Evento     @relation(fields: [eventoId], references: [id])
    dataCompra   DateTime   @default(now())
    quantidade   Int
    total        Float
}

